{% extends "base.html" %}
{% block content %}

<h2 class="mb-4">Manage Products</h2>

<!-- ADD PRODUCT FORM -->
<form
  method="POST"
  enctype="multipart/form-data"
  class="card p-4 mb-4"
>
  <h5 class="mb-3">Add New Product</h5>

  <input
    name="name"
    class="form-control mb-2"
    placeholder="Product name"
    required
  >

  <textarea
    name="description"
    class="form-control mb-2"
    placeholder="Description"
  ></textarea>

  <input
    name="price"
    type="number"
    step="0.01"
    class="form-control mb-2"
    placeholder="Price (MYR)"
    required
  >

  <!-- IMAGE UPLOAD -->
  <input
    type="file"
    name="image"
    class="form-control mb-3"
    accept="image/*"
  >

  <button class="btn btn-dark w-100">Add Product</button>
</form>

<!-- PRODUCT LIST -->
<table class="table table-bordered align-middle">
  <thead class="table-light">
    <tr>
      <th>ID</th>
      <th>Name</th>
      <th>Price</th>
      <th style="width: 220px;">Action</th>
    </tr>
  </thead>

  <tbody>
    {% for product in products %}
    <tr>
      <td>{{ product.id }}</td>
      <td>{{ product.name }}</td>
      <td>${{ "%.2f"|format(product.price) }}</td>
      <td>
        <a
          href="{{ url_for('product', product_id=product.id) }}"
          class="btn btn-sm btn-outline-primary"
        >
          View
        </a>

        <a
          href="{{ url_for('edit_product', product_id=product.id) }}"
          class="btn btn-sm btn-outline-secondary"
        >
          Edit
        </a>

        <a
          href="{{ url_for('delete_product', product_id=product.id) }}"
          class="btn btn-sm btn-outline-danger"
          onclick="return confirm('Delete this product?')"
        >
          Delete
        </a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}
